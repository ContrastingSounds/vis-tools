!function(e){var t={};function a(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(s,r,function(t){return e[t]}.bind(null,r));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t){class a{constructor({vis:e,queryResponseField:t}){this.vis=e,this.name=t.name,this.view=t.view_label||"",this.label=t.label_short||t.label,this.is_numeric=t.is_numeric,this.is_array=["list","location","tier"].includes(t.type),this.value_format=t.value_format,this.geo_type="",("location"===t.type||t.map_layer)&&(this.geo_type="location"===t.type?"location":t.map_layer.name),this.hide=!1,void 0!==this.vis.config["hide|"+this.name]&&this.vis.config["hide|"+this.name]&&(this.hide=!0),this.style="";var a=this.vis.config["style|"+this.name];void 0!==a&&("hide"===a?this.hide=!0:this.style=a),this.heading="",this.short_name="",this.unit="",void 0!==t.tags&&t.tags.forEach(e=>{var t=e.split(":");if("vis-tools"===t[0])switch(t[1]){case"heading":this.heading=t[2];break;case"short_name":this.short_name=t[2];break;case"unit":this.unit=t[2];break;case"style":this.style=t[2]}})}}class s{constructor({keys:e,values:t,types:a=[]}){if(e.length===t.length){this.keys=e,this.values=t,this.types=a;var s=[],r=[];this.values.forEach((e,t)=>{this.types[t]=void 0!==a[t]?a[t]:"line_item","line_item"===this.types[t]?(s.push(e),r.push(e)):"subtotal"===this.types[t]&&r.push(e)}),this.min_for_display=Math.min(r),this.max_for_display=Math.max(r),this.min=Math.min(s),this.max=Math.max(s),this.sum=s.reduce((e,t)=>e+t,0),this.count=s.length,this.avg=s.length>0?this.sum/s.length:null}else console.log("Could not construct series, arrays were of different length.")}}t.newArray=function(e,t){for(var a=[],s=0;s<e;s++)a.push(t);return a},t.ModelDimension=class extends a{constructor({vis:e,queryResponseField:t}){super({vis:e,queryResponseField:t}),this.type="dimension",this.align="left"}},t.ModelMeasure=class extends a{constructor({vis:e,queryResponseField:t,can_pivot:a}){super({vis:e,queryResponseField:t}),this.type="measure",this.align="right",this.is_table_calculation=void 0!==t.is_table_calculation&&t.is_table_calculation,this.calculation_type=t.type,this.is_turtle=t.is_turtle,this.can_pivot=a}},t.CellSeries=class{constructor({column:e,row:t,sort_value:a,series:r}){this.column=e,this.row=t,this.sort_value=a,this.series=new s(r)}toString(){var e="";return this.series.keys.forEach((t,a)=>{e+=t+":";var s=""===this.column.modelField.value_format?this.series.values[a].toString():SSF.format(this.column.modelField.value_format,this.series.values[a]);e+=s+" "}),e}},t.ColumnSeries=class{constructor({column:e,is_numeric:t,series:a}){this.column=e,this.is_numeric=t,this.series=new s(a)}},t.HeaderField=class{constructor({vis:e,queryResponseField:t={name:"",label:"",view:""}}={vis:e,queryResponseField:t}){console.log("HeaderField()",e,t.name),this.vis=e,this.name=t.name,this.label=t.label_short?t.label_short:t.label,this.view=t.view_label}},t.Row=class{constructor(e="line_item"){this.id="",this.modelField=null,this.hide=!1,this.type=e,this.sort=[],this.data={}}},t.Column=class{constructor(e,t,a){this.id=e,this.vis=t,this.modelField=a,this.transposed=!1,this.idx=0,this.pos=0,this.levels=[],this.pivot_key="",this.unit=a.unit||"",this.hide=a.hide||!1,this.variance_type="",this.pivoted=!1,this.subtotal=!1,this.super=!1,this.series=null,this.sort_by_measure_values=[],this.sort_by_pivot_values=[],this.colspans=[];var s={};this.vis.headers.forEach(e=>{s[e.name]=-1}),this.vis.colspan_values[this.id]=s}getLabel(e){if(this.transposed)return this.labels[e];if(void 0!==this.vis.visId&&"report_table"===this.vis.visId)switch(this.variance_type){case"absolute":var t="Var #";break;case"percentage":t="Var %";break;default:t=this.vis.useShortName&&this.modelField.short_name||this.modelField.label}else t=this.modelField.label;var a;(void 0!==(a=this.vis.config["label|"+this.modelField.name])&&a!==this.modelField.label&&(t=a||t),void 0!==this.vis.useViewName&&this.vis.useViewName&&(t=[this.modelField.view,t].join(" ")),void 0!==this.vis.has_pivots)&&(this.vis.has_pivots?"getSortByPivots"===this.vis.sortColsBy?e<this.levels.length&&(t=this.levels[e]):e>=1&&(t=this.levels[e-1]):this.vis.useHeadings&&0===e&&(t=void 0!==(a=this.vis.config["heading|"+this.modelField.name])&&a||this.modelField.heading));return t}getHeaderLevels(){if("getSortByPivots"===this.modelField.vis.sortColsBy)var e=[...this.levels,this.getLabel(this.levels.length)];else e=[this.getLabel(0),...this.levels];if(this.modelField.vis.useHeadings&&!this.modelField.vis.has_pivots){var t=this.modelField.heading,a=this.modelField.vis.config["heading|"+this.modelField.name];void 0!==a&&(t=a||t),e.unshift(t)}return e}getHeaderData(){var e={},t=this.getHeaderLevels();return this.modelField.vis.headers.forEach((a,s)=>{e[a.name]=t[s]}),e}updateSortByMeasures(e){1==this.sort_by_measure_values[0]&&(this.pivoted||this.subtotal||(this.sort_by_measure_values=[1,e]))}getSortByMeasures(){return this.sort_by_measure_values}getSortByPivots(){return this.sort_by_pivot_values}}},function(e,t,a){var s={};!function(e){function t(e){for(var t="",a=e.length-1;a>=0;)t+=e.charAt(a--);return t}function a(e,t){for(var a="";a.length<t;)a+=e;return a}function s(e,t){var s=""+e;return s.length>=t?s:a("0",t-s.length)+s}function r(e,t){var s=""+e;return s.length>=t?s:a(" ",t-s.length)+s}function i(e,t){var s=""+e;return s.length>=t?s:s+a(" ",t-s.length)}e.version="0.11.0";var l=Math.pow(2,32);function n(e,t){return e>l||e<-l?function(e,t){var s=""+Math.round(e);return s.length>=t?s:a("0",t-s.length)+s}(e,t):function(e,t){var s=""+e;return s.length>=t?s:a("0",t-s.length)+s}(Math.round(e),t)}function o(e,t){return t=t||0,e.length>=7+t&&103==(32|e.charCodeAt(t))&&101==(32|e.charCodeAt(t+1))&&110==(32|e.charCodeAt(t+2))&&101==(32|e.charCodeAt(t+3))&&114==(32|e.charCodeAt(t+4))&&97==(32|e.charCodeAt(t+5))&&108==(32|e.charCodeAt(t+6))}var h=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],u=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function d(e){e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e[65535]="General"}var c={};function v(e,t,a){for(var s=e<0?-1:1,r=e*s,i=0,l=1,n=0,o=1,h=0,u=0,d=Math.floor(r);h<t&&(n=(d=Math.floor(r))*l+i,u=d*h+o,!(r-d<5e-8));)r=1/(r-d),i=l,l=n,o=h,h=u;if(u>t&&(h>t?(u=o,n=i):(u=h,n=l)),!a)return[0,s*n,u];var c=Math.floor(s*n/u);return[c,s*n-c*u,u]}function m(e,t,a){if(e>2958465||e<0)return null;var s=0|e,r=Math.floor(86400*(e-s)),i=0,l=[],n={D:s,T:r,u:86400*(e-s)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(n.u)<1e-6&&(n.u=0),t&&t.date1904&&(s+=1462),n.u>.9999&&(n.u=0,86400==++r&&(n.T=r=0,++s,++n.D)),60===s)l=a?[1317,10,29]:[1900,2,29],i=3;else if(0===s)l=a?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var o=new Date(1900,0,1);o.setDate(o.getDate()+s-1),l=[o.getFullYear(),o.getMonth()+1,o.getDate()],i=o.getDay(),s<60&&(i=(i+6)%7),a&&(i=0)}return n.y=l[0],n.m=l[1],n.d=l[2],n.S=r%60,r=Math.floor(r/60),n.M=r%60,r=Math.floor(r/60),n.H=r,n.q=i,n}d(c),e.parse_date_code=m;var p=new Date(1899,11,31,0,0,0),f=p.getTime(),b=new Date(1900,2,1,0,0,0);function g(e,t){var a=e.getTime();return t?a-=1262304e5:e>=b&&(a+=864e5),(a-(f+6e4*(e.getTimezoneOffset()-p.getTimezoneOffset())))/864e5}e._general_int=function(e){return e.toString(10)};var _=function(){var e=/\.(\d*[1-9])0+$/,t=/\.0*$/,a=/\.(\d*[1-9])0+/,s=/\.0*[Ee]/,r=/(E[+-])(\d)$/;function i(a){return a.indexOf(".")>-1?a.replace(t,"").replace(e,".$1"):a}return function(t){var l,n=Math.floor(Math.log(Math.abs(t))*Math.LOG10E);return l=n>=-4&&n<=-1?t.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,a=i(e.toFixed(12));return a.length<=t||(a=e.toPrecision(10)).length<=t?a:e.toExponential(5)}(t):10===n?t.toFixed(10).substr(0,12):function(t){var a=t.toFixed(11).replace(e,".$1");return a.length>(t<0?12:11)&&(a=t.toPrecision(6)),a}(t),i(function(e){for(var t=0;t!=e.length;++t)if(101==(32|e.charCodeAt(t)))return e.replace(a,".$1").replace(s,"E").replace("e","E").replace(r,"$10$2");return e}(l))}}();function y(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):_(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return A(14,g(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function w(e,t,a,r){var i,l="",n=0,o=0,d=a.y,c=0;switch(e){case 98:d=a.y+543;case 121:switch(t.length){case 1:case 2:i=d%100,c=2;break;default:i=d%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=a.m,c=t.length;break;case 3:return u[a.m-1][1];case 5:return u[a.m-1][0];default:return u[a.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=a.d,c=t.length;break;case 3:return h[a.q][0];default:return h[a.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(a.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=a.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=a.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==a.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(n=Math.round(o*(a.S+a.u)))>=60*o&&(n=0),"s"===t?0===n?"0":""+n/o:(l=s(n,2+r),"ss"===t?l.substr(0,2):"."+l.substr(2,t.length-1))):s(a.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*a.D+a.H;break;case"[m]":case"[mm]":i=60*(24*a.D+a.H)+a.M;break;case"[s]":case"[ss]":i=60*(60*(24*a.D+a.H)+a.M)+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=d,c=1}return c>0?s(i,c):""}function $(e){if(e.length<=3)return e;for(var t=e.length%3,a=e.substr(0,t);t!=e.length;t+=3)a+=(a.length>0?",":"")+e.substr(t,3);return a}e._general_num=_,e._general=y;var F=function(){var e=/%/g;var l=/# (\?+)( ?)\/( ?)(\d+)/;var o=/^#*0*\.([0#]+)/,h=/\).*[0#]/,u=/\(###\) ###\\?-####/;function d(e){for(var t,a="",s=0;s!=e.length;++s)switch(t=e.charCodeAt(s)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(t)}return a}function c(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a}function m(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?0:Math.round((e-Math.floor(e))*Math.pow(10,t))}function p(f,b,g){if(40===f.charCodeAt(0)&&!b.match(h)){var _=b.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return g>=0?p("n",_,g):"("+p("n",_,-g)+")"}if(44===b.charCodeAt(b.length-1))return function(e,t,a){for(var s=t.length-1;44===t.charCodeAt(s-1);)--s;return F(e,t.substr(0,s),a/Math.pow(10,3*(t.length-s)))}(f,b,g);if(-1!==b.indexOf("%"))return function(t,s,r){var i=s.replace(e,""),l=s.length-i.length;return F(t,i,r*Math.pow(10,2*l))+a("%",l)}(f,b,g);if(-1!==b.indexOf("E"))return function e(t,a){var s,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(0==a)return"0.0E+0";if(a<0)return"-"+e(t,-a);var i=t.indexOf(".");-1===i&&(i=t.indexOf("E"));var l=Math.floor(Math.log(a)*Math.LOG10E)%i;if(l<0&&(l+=i),-1===(s=(a/Math.pow(10,l)).toPrecision(r+1+(i+l)%i)).indexOf("e")){var n=Math.floor(Math.log(a)*Math.LOG10E);for(-1===s.indexOf(".")?s=s.charAt(0)+"."+s.substr(1)+"E+"+(n-s.length+l):s+="E+"+(n-l);"0."===s.substr(0,2);)s=(s=s.charAt(0)+s.substr(2,i)+"."+s.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");s=s.replace(/\+-/,"-")}s=s.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,a,s){return t+a+s.substr(0,(i+l)%i)+"."+s.substr(l)+"E"}))}else s=a.toExponential(r);return t.match(/E\+00$/)&&s.match(/e[+-]\d$/)&&(s=s.substr(0,s.length-1)+"0"+s.charAt(s.length-1)),t.match(/E\-/)&&s.match(/e\+/)&&(s=s.replace(/e\+/,"e")),s.replace("e","E")}(b,g);if(36===b.charCodeAt(0))return"$"+p(f,b.substr(" "==b.charAt(1)?2:1),g);var y,w,M,E,k=Math.abs(g),C=g<0?"-":"";if(b.match(/^00+$/))return C+n(k,b.length);if(b.match(/^[#?]+$/))return"0"===(y=n(g,0))&&(y=""),y.length>b.length?y:d(b.substr(0,b.length-y.length))+y;if(w=b.match(l))return function(e,t,i){var l=parseInt(e[4],10),n=Math.round(t*l),o=Math.floor(n/l),h=n-o*l,u=l;return i+(0===o?"":""+o)+" "+(0===h?a(" ",e[1].length+1+e[4].length):r(h,e[1].length)+e[2]+"/"+e[3]+s(u,e[4].length))}(w,k,C);if(b.match(/^#+0+$/))return C+n(k,b.length-b.indexOf("0"));if(w=b.match(o))return y=c(g,w[1].length).replace(/^([^\.]+)$/,"$1."+d(w[1])).replace(/\.$/,"."+d(w[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+a("0",d(w[1]).length-t.length)})),-1!==b.indexOf("0.")?y:y.replace(/^0\./,".");if(b=b.replace(/^#+([0.])/,"$1"),w=b.match(/^(0*)\.(#*)$/))return C+c(k,w[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,w[1].length?"0.":".");if(w=b.match(/^#{1,3},##0(\.?)$/))return C+$(n(k,0));if(w=b.match(/^#,##0\.([#0]*0)$/))return g<0?"-"+p(f,b,-g):$(""+(Math.floor(g)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(g,w[1].length)))+"."+s(m(g,w[1].length),w[1].length);if(w=b.match(/^#,#*,#0/))return p(f,b.replace(/^#,#*,/,""),g);if(w=b.match(/^([0#]+)(\\?-([0#]+))+$/))return y=t(p(f,b.replace(/[\\-]/g,""),g)),M=0,t(t(b.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return M<y.length?y.charAt(M++):"0"===e?"0":""})));if(b.match(u))return"("+(y=p(f,"##########",g)).substr(0,3)+") "+y.substr(3,3)+"-"+y.substr(6);var S="";if(w=b.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return M=Math.min(w[4].length,7),E=v(k,Math.pow(10,M)-1,!1),y=""+C," "==(S=F("n",w[1],E[1])).charAt(S.length-1)&&(S=S.substr(0,S.length-1)+"0"),y+=S+w[2]+"/"+w[3],(S=i(E[2],M)).length<w[4].length&&(S=d(w[4].substr(w[4].length-S.length))+S),y+=S;if(w=b.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return M=Math.min(Math.max(w[1].length,w[4].length),7),C+((E=v(k,Math.pow(10,M)-1,!0))[0]||(E[1]?"":"0"))+" "+(E[1]?r(E[1],M)+w[2]+"/"+w[3]+i(E[2],M):a(" ",2*M+1+w[2].length+w[3].length));if(w=b.match(/^[#0?]+$/))return y=n(g,0),b.length<=y.length?y:d(b.substr(0,b.length-y.length))+y;if(w=b.match(/^([#0?]+)\.([#0]+)$/)){y=""+g.toFixed(Math.min(w[2].length,10)).replace(/([^0])0+$/,"$1"),M=y.indexOf(".");var x=b.indexOf(".")-M,O=b.length-y.length-x;return d(b.substr(0,x)+y+b.substr(b.length-O))}if(w=b.match(/^00,000\.([#0]*0)$/))return M=m(g,w[1].length),g<0?"-"+p(f,b,-g):$(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(g)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?s(0,3-e.length):"")+e}))+"."+s(M,w[1].length);switch(b){case"###,##0.00":return p(f,"#,##0.00",g);case"###,###":case"##,###":case"#,###":var A=$(n(k,0));return"0"!==A?C+A:"";case"###,###.00":return p(f,"###,##0.00",g).replace(/^0\./,".");case"#,###.00":return p(f,"#,##0.00",g).replace(/^0\./,".")}throw new Error("unsupported format |"+b+"|")}function f(n,c,m){if(40===n.charCodeAt(0)&&!c.match(h)){var p=c.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return m>=0?f("n",p,m):"("+f("n",p,-m)+")"}if(44===c.charCodeAt(c.length-1))return function(e,t,a){for(var s=t.length-1;44===t.charCodeAt(s-1);)--s;return F(e,t.substr(0,s),a/Math.pow(10,3*(t.length-s)))}(n,c,m);if(-1!==c.indexOf("%"))return function(t,s,r){var i=s.replace(e,""),l=s.length-i.length;return F(t,i,r*Math.pow(10,2*l))+a("%",l)}(n,c,m);if(-1!==c.indexOf("E"))return function e(t,a){var s,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(0==a)return"0.0E+0";if(a<0)return"-"+e(t,-a);var i=t.indexOf(".");-1===i&&(i=t.indexOf("E"));var l=Math.floor(Math.log(a)*Math.LOG10E)%i;if(l<0&&(l+=i),!(s=(a/Math.pow(10,l)).toPrecision(r+1+(i+l)%i)).match(/[Ee]/)){var n=Math.floor(Math.log(a)*Math.LOG10E);-1===s.indexOf(".")?s=s.charAt(0)+"."+s.substr(1)+"E+"+(n-s.length+l):s+="E+"+(n-l),s=s.replace(/\+-/,"-")}s=s.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,a,s){return t+a+s.substr(0,(i+l)%i)+"."+s.substr(l)+"E"}))}else s=a.toExponential(r);return t.match(/E\+00$/)&&s.match(/e[+-]\d$/)&&(s=s.substr(0,s.length-1)+"0"+s.charAt(s.length-1)),t.match(/E\-/)&&s.match(/e\+/)&&(s=s.replace(/e\+/,"e")),s.replace("e","E")}(c,m);if(36===c.charCodeAt(0))return"$"+f(n,c.substr(" "==c.charAt(1)?2:1),m);var b,g,_,y,w=Math.abs(m),M=m<0?"-":"";if(c.match(/^00+$/))return M+s(w,c.length);if(c.match(/^[#?]+$/))return b=""+m,0===m&&(b=""),b.length>c.length?b:d(c.substr(0,c.length-b.length))+b;if(g=c.match(l))return function(e,t,s){return s+(0===t?"":""+t)+a(" ",e[1].length+2+e[4].length)}(g,w,M);if(c.match(/^#+0+$/))return M+s(w,c.length-c.indexOf("0"));if(g=c.match(o))return b=(b=(""+m).replace(/^([^\.]+)$/,"$1."+d(g[1])).replace(/\.$/,"."+d(g[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+a("0",d(g[1]).length-t.length)})),-1!==c.indexOf("0.")?b:b.replace(/^0\./,".");if(c=c.replace(/^#+([0.])/,"$1"),g=c.match(/^(0*)\.(#*)$/))return M+(""+w).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,g[1].length?"0.":".");if(g=c.match(/^#{1,3},##0(\.?)$/))return M+$(""+w);if(g=c.match(/^#,##0\.([#0]*0)$/))return m<0?"-"+f(n,c,-m):$(""+m)+"."+a("0",g[1].length);if(g=c.match(/^#,#*,#0/))return f(n,c.replace(/^#,#*,/,""),m);if(g=c.match(/^([0#]+)(\\?-([0#]+))+$/))return b=t(f(n,c.replace(/[\\-]/g,""),m)),_=0,t(t(c.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return _<b.length?b.charAt(_++):"0"===e?"0":""})));if(c.match(u))return"("+(b=f(n,"##########",m)).substr(0,3)+") "+b.substr(3,3)+"-"+b.substr(6);var E="";if(g=c.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(g[4].length,7),y=v(w,Math.pow(10,_)-1,!1),b=""+M," "==(E=F("n",g[1],y[1])).charAt(E.length-1)&&(E=E.substr(0,E.length-1)+"0"),b+=E+g[2]+"/"+g[3],(E=i(y[2],_)).length<g[4].length&&(E=d(g[4].substr(g[4].length-E.length))+E),b+=E;if(g=c.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(Math.max(g[1].length,g[4].length),7),M+((y=v(w,Math.pow(10,_)-1,!0))[0]||(y[1]?"":"0"))+" "+(y[1]?r(y[1],_)+g[2]+"/"+g[3]+i(y[2],_):a(" ",2*_+1+g[2].length+g[3].length));if(g=c.match(/^[#0?]+$/))return b=""+m,c.length<=b.length?b:d(c.substr(0,c.length-b.length))+b;if(g=c.match(/^([#0]+)\.([#0]+)$/)){b=""+m.toFixed(Math.min(g[2].length,10)).replace(/([^0])0+$/,"$1"),_=b.indexOf(".");var k=c.indexOf(".")-_,C=c.length-b.length-k;return d(c.substr(0,k)+b+c.substr(c.length-C))}if(g=c.match(/^00,000\.([#0]*0)$/))return m<0?"-"+f(n,c,-m):$(""+m).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?s(0,3-e.length):"")+e}))+"."+s(0,g[1].length);switch(c){case"###,###":case"##,###":case"#,###":var S=$(""+w);return"0"!==S?M+S:"";default:if(c.match(/\.[0#?]*$/))return f(n,c.slice(0,c.lastIndexOf(".")),m)+d(c.slice(c.lastIndexOf(".")))}throw new Error("unsupported format |"+c+"|")}return function(e,t,a){return(0|a)===a?f(e,t,a):p(e,t,a)}}();function M(e){for(var t=[],a=!1,s=0,r=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:a=!a;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(r,s-r),r=s+1}if(t[t.length]=e.substr(r),!0===a)throw new Error("Format |"+e+"| unterminated string ");return t}e._split=M;var E=/\[[HhMmSs]*\]/;function k(e){for(var t=0,a="",s="";t<e.length;)switch(a=e.charAt(t)){case"G":o(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(s=a;"]"!==e.charAt(t++)&&t<e.length;)s+=e.charAt(t);if(s.match(E))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(a=e.charAt(++t))>-1||"\\"==a&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===a;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":default:++t}return!1}function C(e,t,a,s){for(var r,i,l,n=[],h="",u=0,d="",c="t",v="H";u<e.length;)switch(d=e.charAt(u)){case"G":if(!o(e,u))throw new Error("unrecognized character "+d+" in "+e);n[n.length]={t:"G",v:"General"},u+=7;break;case'"':for(h="";34!==(l=e.charCodeAt(++u))&&u<e.length;)h+=String.fromCharCode(l);n[n.length]={t:"t",v:h},++u;break;case"\\":var p=e.charAt(++u),f="("===p||")"===p?p:"t";n[n.length]={t:f,v:p},++u;break;case"_":n[n.length]={t:"t",v:" "},u+=2;break;case"@":n[n.length]={t:"T",v:t},++u;break;case"B":case"b":if("1"===e.charAt(u+1)||"2"===e.charAt(u+1)){if(null==r&&null==(r=m(t,a,"2"===e.charAt(u+1))))return"";n[n.length]={t:"X",v:e.substr(u,2)},c=d,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==r&&null==(r=m(t,a)))return"";for(h=d;++u<e.length&&e.charAt(u).toLowerCase()===d;)h+=d;"m"===d&&"h"===c.toLowerCase()&&(d="M"),"h"===d&&(d=v),n[n.length]={t:d,v:h},c=d;break;case"A":case"a":var b={t:d,v:d};if(null==r&&(r=m(t,a)),"A/P"===e.substr(u,3).toUpperCase()?(null!=r&&(b.v=r.H>=12?"P":"A"),b.t="T",v="h",u+=3):"AM/PM"===e.substr(u,5).toUpperCase()?(null!=r&&(b.v=r.H>=12?"PM":"AM"),b.t="T",u+=5,v="h"):(b.t="t",++u),null==r&&"T"===b.t)return"";n[n.length]=b,c=d;break;case"[":for(h=d;"]"!==e.charAt(u++)&&u<e.length;)h+=e.charAt(u);if("]"!==h.slice(-1))throw'unterminated "[" block: |'+h+"|";if(h.match(E)){if(null==r&&null==(r=m(t,a)))return"";n[n.length]={t:"Z",v:h.toLowerCase()},c=h.charAt(1)}else h.indexOf("$")>-1&&(h=(h.match(/\$([^-\[\]]*)/)||[])[1]||"$",k(e)||(n[n.length]={t:"t",v:h}));break;case".":if(null!=r){for(h=d;++u<e.length&&"0"===(d=e.charAt(u));)h+=d;n[n.length]={t:"s",v:h};break}case"0":case"#":for(h=d;++u<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(u))>-1;)h+=d;n[n.length]={t:"n",v:h};break;case"?":for(h=d;e.charAt(++u)===d;)h+=d;n[n.length]={t:d,v:h},c=d;break;case"*":++u," "!=e.charAt(u)&&"*"!=e.charAt(u)||++u;break;case"(":case")":n[n.length]={t:1===s?"t":d,v:d},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(h=d;u<e.length&&"0123456789".indexOf(e.charAt(++u))>-1;)h+=e.charAt(u);n[n.length]={t:"D",v:h};break;case" ":n[n.length]={t:d,v:d},++u;break;case"$":n[n.length]={t:"t",v:"$"},++u;break;default:if(-1===",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);n[n.length]={t:"t",v:d},++u}var g,_=0,$=0;for(u=n.length-1,c="t";u>=0;--u)switch(n[u].t){case"h":case"H":n[u].t=v,c="h",_<1&&(_=1);break;case"s":(g=n[u].v.match(/\.0+$/))&&($=Math.max($,g[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":c=n[u].t;break;case"m":"s"===c&&(n[u].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&n[u].v.match(/[Hh]/)&&(_=1),_<2&&n[u].v.match(/[Mm]/)&&(_=2),_<3&&n[u].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:r.u>=.5&&(r.u=0,++r.S),r.S>=60&&(r.S=0,++r.M),r.M>=60&&(r.M=0,++r.H);break;case 2:r.u>=.5&&(r.u=0,++r.S),r.S>=60&&(r.S=0,++r.M)}var M,C="";for(u=0;u<n.length;++u)switch(n[u].t){case"t":case"T":case" ":case"D":break;case"X":n[u].v="",n[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[u].v=w(n[u].t.charCodeAt(0),n[u].v,r,$),n[u].t="t";break;case"n":case"?":for(M=u+1;null!=n[M]&&("?"===(d=n[M].t)||"D"===d||(" "===d||"t"===d)&&null!=n[M+1]&&("?"===n[M+1].t||"t"===n[M+1].t&&"/"===n[M+1].v)||"("===n[u].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===n[M].v||" "===n[M].v&&null!=n[M+1]&&"?"==n[M+1].t));)n[u].v+=n[M].v,n[M]={v:"",t:";"},++M;C+=n[u].v,u=M-1;break;case"G":n[u].t="t",n[u].v=y(t,a)}var S,x,O="";if(C.length>0){40==C.charCodeAt(0)?(S=t<0&&45===C.charCodeAt(0)?-t:t,x=F("n",C,S)):(x=F("n",C,S=t<0&&s>1?-t:t),S<0&&n[0]&&"t"==n[0].t&&(x=x.substr(1),n[0].v="-"+n[0].v)),M=x.length-1;var A=n.length;for(u=0;u<n.length;++u)if(null!=n[u]&&"t"!=n[u].t&&n[u].v.indexOf(".")>-1){A=u;break}var T=n.length;if(A===n.length&&-1===x.indexOf("E")){for(u=n.length-1;u>=0;--u)null!=n[u]&&-1!=="n?".indexOf(n[u].t)&&(M>=n[u].v.length-1?(M-=n[u].v.length,n[u].v=x.substr(M+1,n[u].v.length)):M<0?n[u].v="":(n[u].v=x.substr(0,M+1),M=-1),n[u].t="t",T=u);M>=0&&T<n.length&&(n[T].v=x.substr(0,M+1)+n[T].v)}else if(A!==n.length&&-1===x.indexOf("E")){for(M=x.indexOf(".")-1,u=A;u>=0;--u)if(null!=n[u]&&-1!=="n?".indexOf(n[u].t)){for(i=n[u].v.indexOf(".")>-1&&u===A?n[u].v.indexOf(".")-1:n[u].v.length-1,O=n[u].v.substr(i+1);i>=0;--i)M>=0&&("0"===n[u].v.charAt(i)||"#"===n[u].v.charAt(i))&&(O=x.charAt(M--)+O);n[u].v=O,n[u].t="t",T=u}for(M>=0&&T<n.length&&(n[T].v=x.substr(0,M+1)+n[T].v),M=x.indexOf(".")+1,u=A;u<n.length;++u)if(null!=n[u]&&(-1!=="n?(".indexOf(n[u].t)||u===A)){for(i=n[u].v.indexOf(".")>-1&&u===A?n[u].v.indexOf(".")+1:0,O=n[u].v.substr(0,i);i<n[u].v.length;++i)M<x.length&&(O+=x.charAt(M++));n[u].v=O,n[u].t="t",T=u}}}for(u=0;u<n.length;++u)null!=n[u]&&"n?".indexOf(n[u].t)>-1&&(S=s>1&&t<0&&u>0&&"-"===n[u-1].v?-t:t,n[u].v=F(n[u].t,n[u].v,S),n[u].t="t");var H="";for(u=0;u!==n.length;++u)null!=n[u]&&(H+=n[u].v);return H}e.is_date=k,e._eval=C;var S=/\[[=<>]/,x=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function O(e,t){if(null==t)return!1;var a=parseFloat(t[2]);switch(t[1]){case"=":if(e==a)return!0;break;case">":if(e>a)return!0;break;case"<":if(e<a)return!0;break;case"<>":if(e!=a)return!0;break;case">=":if(e>=a)return!0;break;case"<=":if(e<=a)return!0}return!1}function A(e,t,a){null==a&&(a={});var s="";switch(typeof e){case"string":s="m/d/yy"==e&&a.dateNF?a.dateNF:e;break;case"number":s=14==e&&a.dateNF?a.dateNF:(null!=a.table?a.table:c)[e]}if(o(s,0))return y(t,a);t instanceof Date&&(t=g(t,a.date1904));var r=function(e,t){var a=M(e),s=a.length,r=a[s-1].indexOf("@");if(s<4&&r>-1&&--s,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if("number"!=typeof t)return[4,4===a.length||r>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=r>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=r>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=r>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"]}var i=t>0?a[0]:t<0?a[1]:a[2];if(-1===a[0].indexOf("[")&&-1===a[1].indexOf("["))return[s,i];if(null!=a[0].match(S)||null!=a[1].match(S)){var l=a[0].match(x),n=a[1].match(x);return O(t,l)?[s,a[0]]:O(t,n)?[s,a[1]]:[s,a[null!=l&&null!=n?2:1]]}return[s,i]}(s,t);if(o(r[1]))return y(t,a);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return C(r[1],t,a,r[0])}function T(e,t){if("number"!=typeof t){t=+t||-1;for(var a=0;a<392;++a)if(null!=c[a]){if(c[a]==e){t=a;break}}else t<0&&(t=a);t<0&&(t=391)}return c[t]=e,t}e.load=T,e._table=c,e.get_table=function(){return c},e.load_table=function(e){for(var t=0;392!=t;++t)void 0!==e[t]&&T(e[t],t)},e.init_table=d,e.format=A}(s),"undefined"==typeof DO_NOT_EXPORT_SSF&&(e.exports=s)},function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),i=a(0);const l={theme:{section:"Theme",type:"string",display:"select",label:"Theme",values:[{Traditional:"traditional"},{Looker:"looker"},{Contemporary:"contemporary"},{"Use custom theme":"custom"}],default:"traditional",order:1},customTheme:{section:"Theme",type:"string",label:"Load custom CSS from:",default:"",order:2},layout:{section:"Theme",type:"string",display:"select",label:"Layout",values:[{Even:"fixed"},{Auto:"auto"}],default:"fixed",order:3},columnOrder:{},rowSubtotals:{section:"Table",type:"boolean",label:"Row Subtotals",display_size:"half",default:!1,order:1},colSubtotals:{section:"Table",type:"boolean",label:"Col Subtotals",display_size:"half",default:!1,order:2},spanRows:{section:"Table",type:"boolean",label:"Merge Dims",display_size:"half",default:!0,order:3},spanCols:{section:"Table",type:"boolean",label:"Merge Headers",display_size:"half",default:!0,order:4},sortColumnsBy:{section:"Table",type:"string",display:"select",label:"Sort Columns By",values:[{Pivots:"getSortByPivots"},{Measures:"getSortByMeasures"}],default:"getSortByPivots",order:6},useViewName:{section:"Table",type:"boolean",label:"Include View Name",default:!1,order:7},useHeadings:{section:"Table",type:"boolean",label:"Use Headings (non-pivots only)",default:!1,order:8},useShortName:{section:"Table",type:"boolean",label:"Use Short Name (from model)",default:!1,order:9},groupVarianceColumns:{section:"Table",type:"boolean",label:"Group Variance Columns After Pivots",default:!1,order:10},indexColumn:{section:"Dimensions",type:"boolean",label:"Use Last Field Only",default:!1,order:0},transposeTable:{section:"Table",type:"boolean",label:"Transpose",default:!1,order:100}};exports.VisPluginTableModel=class{constructor(e,t,a){this.visId="report_table",this.config=a,this.headers=[],this.dimensions=[],this.measures=[],this.columns=[],this.data=[],this.subtotals_data={},this.transposed_headers=[],this.transposed_columns=[],this.transposed_data=[],this.pivots=[],this.pivot_values=[],this.variances=[],this.column_series=[],this.colspan_values={},this.rowspan_values={},this.useIndexColumn=a.indexColumn||!1,this.useHeadings=a.useHeadings||!1,this.useShortName=a.useShortName||!1,this.useViewName=a.useViewName||!1,this.addRowSubtotals=a.rowSubtotals||!1,this.addSubtotalDepth=parseInt(a.subtotalDepth)||this.dimensions.length-1,this.addColSubtotals=a.colSubtotals||!1,this.spanRows=a.spanRows,this.spanCols=a.spanCols,this.sortColsBy=a.sortColumnsBy||"getSortByPivots",this.hasTotals=void 0!==t.totals_data,this.calculateOthers=void 0!==t.truncated&&t.truncated,this.hasSubtotals=!1,this.hasRowTotals=t.has_row_totals||!1,this.hasPivots=!1,this.hasSupers=!1,this.transposeTable=a.transposeTable;this.checkPivotsAndSupermeasures(t),this.addHeaders(),this.addDimensions(t,0),this.addMeasures(t,0),this.checkVarianceCalculations(),this.useIndexColumn&&this.buildIndexColumn(t),this.checkSubtotalsData(t),this.buildRows(e),this.addColumnSeries(),this.hasTotals&&this.buildTotals(t),this.spanRows&&this.setRowSpans(),this.addRowSubtotals&&this.addSubTotals(),this.addColSubtotals&&2===this.pivots.length&&this.addColumnSubTotals(),console.log(this),this.addVarianceColumns(),this.sortColumns(),this.spanCols&&this.setColSpans(),this.applyFormatting(),this.transposeTable&&(this.transposeColumns(),this.transposeRows()),this.validateConfig()}static getCoreConfigOptions(){return l}getConfigOptions(){var e=l,t=[];return this.dimensions.forEach((a,s)=>{if(e["label|"+a.name]={section:"Dimensions",type:"string",label:a.label,default:a.label,order:10*s+1},e["heading|"+a.name]={section:"Dimensions",type:"string",label:"Heading",default:"",order:10*s+2},e["hide|"+a.name]={section:"Dimensions",type:"boolean",label:"Hide",display_size:"third",default:!1,order:10*s+3},s<this.dimensions.length-1){var r={};r[a.label]=(s+1).toString(),t.push(r)}}),e.subtotalDepth={section:"Table",type:"string",label:"Sub Total Depth",display:"select",values:t,default:"1",order:5},this.measures.forEach((t,a)=>{e["label|"+t.name]={section:"Measures",type:"string",label:t.label,default:t.label,order:100+10*a+1},e["heading|"+t.name]={section:"Measures",type:"string",label:"Heading for "+t.label,default:"",order:100+10*a+2},e["style|"+t.name]={section:"Measures",type:"string",label:"Style",display:"select",values:[{Normal:"normal"},{"Black/Red":"black_red"},{Subtotal:"subtotal"},{Hidden:"hide"}],order:100+10*a+3};var s=[];if(t.can_pivot){var r=[];this.pivots.forEach((e,t)=>{if(1===this.pivots.length||1===t||this.config.colSubtotals){var a={};a["By "+e.label]=e.name,r.push(a)}}),s=s.concat(r)}this.measures.forEach((e,r)=>{var i=t.can_pivot===e.can_pivot||this.hasRowTotals&&!e.is_table_calculation;if(a!=r&&i){var l={};l["Vs. "+e.label]=e.name,s.push(l)}}),s.unshift({"(none)":"no_variance"}),e["comparison|"+t.name]={section:"Measures",type:"string",label:"Comparison",display:"select",values:s,order:100+10*a+5},e["switch|"+t.name]={section:"Measures",type:"boolean",label:"Switch",display_size:"third",default:!1,order:100+10*a+6},e["var_num|"+t.name]={section:"Measures",type:"boolean",label:"Var #",display_size:"third",default:!0,order:100+10*a+7},e["var_pct|"+t.name]={section:"Measures",type:"boolean",label:"Var %",display_size:"third",default:!1,order:100+10*a+8}}),e}checkPivotsAndSupermeasures(e){e.fields.pivots.forEach(e=>this.pivots.push(new i.HeaderField({vis:this,queryResponseField:e}))),void 0!==e.pivots&&(this.pivot_values=e.pivots,this.hasPivots=!0),void 0!==e.fields.supermeasure_like&&(this.hasSupers=!0)}addHeaders(){var e=new i.HeaderField({vis:this,queryResponseField:{label:"",name:"measure",view:""}});if(this.pivots.forEach(e=>{this.headers.push(e)}),"getSortByPivots"===this.sortColsBy?this.headers.push(e):this.headers.unshift(e),this.useHeadings&&!this.hasPivots){var t=new i.HeaderField({vis:this,queryResponseField:{label:"",name:"heading",view:""}});this.headers.unshift(t)}}addDimensions(e,t){e.fields.dimension_like.forEach(e=>{var a=new i.ModelDimension({vis:this,queryResponseField:e});a.hide=!!this.useIndexColumn,this.dimensions.push(a);var s=new i.Column(a.name,this,a);s.idx=t,s.levels=Object(i.newArray)(this.pivots.length,new i.HeaderField({vis:this,queryResponseField:{}})),s.sort_by_measure_values=[0,t,...Object(i.newArray)(this.pivots.length,0)],s.sort_by_pivot_values=[0,...Object(i.newArray)(this.pivots.length,0),t],this.columns.push(s),t+=10})}addMeasures(e,t){var a=this.config;e.fields.measure_like.forEach(e=>{var t=new i.ModelMeasure({vis:this,queryResponseField:e,can_pivot:!0});this.measures.push(t)}),this.hasPivots?this.pivot_values.forEach(e=>{this.measures.forEach((a,s)=>{if("$$$_row_total_$$$"!=e.key||"$$$_row_total_$$$"==e.key&&0==a.is_table_calculation){var r=e.key+"."+a.name,l=[],n=[];this.pivots.forEach(t=>{l.push(new i.HeaderField({vis:this,queryResponseField:{name:e.data[t.name],label:"",view:""}})),n.push(e.sort_values[t.name])});var o=a,h=new i.Column(r,this,o);h.idx=t,h.levels=l,h.pivoted=!0,h.pivot_key=e.key,"$$$_row_total_$$$"!==e.key?(h.sort_by_measure_values=[1,s,...n],h.sort_by_pivot_values=[1,...n,t]):(h.super=!0,h.sort_by_measure_values=[2,s,...Object(i.newArray)(this.pivots.length,0)],h.sort_by_pivot_values=[2,...Object(i.newArray)(this.pivots.length,0),t]),this.columns.push(h),t+=10}})}):this.measures.forEach(e=>{var s=new i.Column(e.name,this,e);s.idx=t;try{void 0!==a.columnOrder[s.id]?s.pos=a.columnOrder[s.id]:s.pos=t}catch{s.pos=t}s.sort_by_measure_values=[1,s.pos],s.sort_by_pivot_values=[1,s.pos],this.columns.push(s),t+=10}),void 0!==e.fields.supermeasure_like&&e.fields.supermeasure_like.forEach(e=>{var a=new i.ModelMeasure({vis:this,queryResponseField:e,can_pivot:!1});this.measures.push(a);var s=new i.Column(a.name,this,a);s.idx=t,s.levels=Object(i.newArray)(this.pivots.length,new i.HeaderField({vis:this,queryResponseField:{}})),s.super=!0,s.sort_by_measure_values=[2,t,...Object(i.newArray)(this.pivots.length,1)],s.sort_by_pivot_values=[2,...Object(i.newArray)(this.pivots.length,1),t],this.columns.push(s),t+=10})}checkVarianceCalculations(){Object.keys(this.config).forEach(e=>{if(e.startsWith("comparison")){var t=e.split("|")[1],a=!1;if(this.measures.forEach(e=>{t===e.name&&(a=!0)}),a){if(this.pivots.map(e=>e.name).includes(this.config[e]))var s="by_pivot";else s="vs_measure";if(void 0!==this.config["switch|"+t])if(this.config["switch|"+t])var r=!0;else r=!1;this.variances.push({baseline:t,comparison:this.config[e],type:s,reverse:r})}}})}buildIndexColumn(){var e=new i.Column("$$$_index_$$$",this,this.dimensions[this.dimensions.length-1]);e.levels=Object(i.newArray)(this.pivots.length,new i.HeaderField({vis:this,queryResponseField:{}})),e.sort_by_measure_values=[-1,0,...Object(i.newArray)(this.pivots.length,0)],e.sort_by_pivot_values=[-1,...Object(i.newArray)(this.pivots.length,0),0],this.columns.push(e)}checkSubtotalsData(e){void 0!==e.subtotals_data&&(this.hasSubtotals=!0,void 0!==e.subtotals_data[this.addSubtotalDepth]&&e.subtotals_data[this.addSubtotalDepth].forEach(e=>{var t=new i.Row("subtotal");t.$$$__grouping__$$$=e.$$$__grouping__$$$;var a=["Subtotal"];t.$$$__grouping__$$$.forEach(t=>{a.push(e[t].value)}),t.id=a.join("|"),this.columns.forEach(a=>{t.data[a.id]=a.pivoted?e[a.modelField.name][a.pivot_key]:e[a.id],void 0!==t.data[a.id]&&(void 0===t.data[a.id].cell_style?t.data[a.id].cell_style=["total","subtotal"]:t.data[a.id].cell_style.concat(["total","subtotal"]),void 0!==a.modelField.style&&(t.data[a.id].cell_style=t.data[a.id].cell_style.concat(a.modelField.style)),null===t.data[a.id].value&&(t.data[a.id].rendered=""))}),this.subtotals_data[t.id]=t}))}buildRows(e){e.forEach((e,t)=>{var a=new i.Row("line_item");this.columns.forEach(t=>{if(a.data[t.id]=t.pivoted?e[t.modelField.name][t.pivot_key]:e[t.id],void 0!==a.data[t.id]&&(a.data[t.id].rowspan=1,void 0===a.data[t.id].cell_style&&(a.data[t.id].cell_style=[]),void 0!==t.modelField.style&&(a.data[t.id].cell_style=a.data[t.id].cell_style.concat(t.modelField.style)),null===a.data[t.id].value&&(a.data[t.id].rendered=""),t.modelField.is_turtle)){var s=new i.CellSeries({column:t,row:a,sort_value:a.data[t.id].sort_value,series:{keys:a.data[t.id]._parsed.keys,values:a.data[t.id]._parsed.values}});a.data[t.id].value=s,a.data[t.id].rendered=s.toString()}}),a.id=this.dimensions.map(e=>a.data[e.name].value).join("|");var s=this.dimensions[this.dimensions.length-1].name;a.data.$$$_index_$$$={value:a.data[s].value,rendered:this.getRenderedFromHtml(a.data[s]),html:a.data[s].html,cell_style:["indent"]},a.sort=[0,0,t],this.data.push(a)})}addColumnSeries(){this.columns.forEach(e=>{var t=[],a=[],s=[];this.data.forEach(r=>{t.push(r.id),a.push(r.data[e.id].value),s.push(r.type)});var r=new i.ColumnSeries({column:e,is_numeric:e.modelField.is_numeric,series:{keys:t,values:a,types:s}});e.series=r,this.column_series.push(r)})}buildTotals(e){for(var t=e.totals_data,a=this.dimensions[0].name,s=0;s>this.dimensions.length;s++){var l=this.dimensions[s];if(!l.hide){a=l.name;break}}var n=new i.Row("total"),o=new i.Row("line_item");this.columns.forEach(e=>{var a=null;if(n.id="Total",o.id="Others",n.data[e.id]={value:"",cell_style:["total"]},o.data[e.id]={value:"",cell_style:[]},"measure"==e.modelField.type){var s=e.pivoted?t[e.modelField.name][e.pivot_key]:t[e.id];if(void 0===s.rendered&&void 0!==s.html&&(s.rendered=this.getRenderedFromHtml(s)),this.calculateOthers&&(a=["sum","count_distinct","count"].includes(e.modelField.calculation_type)?s.value-e.series.series.sum:(s.value+e.series.series.avg)/2),s.cell_style=["total"],n.data[e.id]=s,void 0!==n.data[e.id].links&&n.data[e.id].links.forEach(e=>{e.type="measure_default"}),this.calculateOthers&&a){var i=""===e.modelField.value_format?a.toString():r.a.format(e.modelField.value_format,a);o.data[e.id]={value:a,rendered:i}}}}),this.useIndexColumn&&(n.data.$$$_index_$$$.value="TOTAL"),n.data[a].value="TOTAL",n.sort=[1,0,0],this.calculateOthers&&(this.useIndexColumn&&(o.data.$$$_index_$$$.value="Others"),o.data[a].value="Others",o.sort=[1,-1,-1]),this.data.push(n),this.calculateOthers&&this.data.push(o),this.hasTotals=!0,this.sortData()}setRowSpans(){var e,t=[],a=this.rowspan_values,s={};e=this.data,(t=this.dimensions.filter(e=>!e.hide)).forEach(e=>{s[e.id]=1});for(var r=e.length-1;r>=0;r--){var i=e[r];if("line_item"===i.type){a[i.id]={};for(var l=0;l<t.length;l++){var n=t[l],o=i.data[n.name].value,h=r>0?e[r-1].data[n.name].value:null;if(!(r>0&&o===h)){for(var u=l;u<t.length;u++){var d=t[u];a[i.id][d.name]=s[d.name],i.data[d.name].rowspan=s[d.name],s[d.name]=1}break}a[i.id][n.name]=-1,i.data[n.name].rowspan=-1,s[n.name]+=1}}else t.forEach(e=>{s[e.name]=1})}}addSubTotals(){var e=this.addSubtotalDepth,t=[],a=[];this.data.forEach((s,r)=>{if("total"!==s.type){for(var i=[],l=0;l<e;l++){var n=this.dimensions[l].name;i.push(s.data[n].value)}i.join("|")!==a.join("|")&&(t.push(i),a=i),s.sort=[0,t.length-1,r]}});for(var s=this.dimensions[0].name,l=0;l<this.dimensions.length;l++){var n=this.dimensions[l];if(!n.hide){s=n.name;break}}t.forEach((e,t)=>{var a=new i.Row("subtotal");a.id="Subtotal|"+e.join("|"),this.columns.forEach(i=>{if(a.data[i.id]={cell_style:["total","subtotal"]},"$$$_index_$$$"===i.id||i.id===s){var l=e.join(" | ");a.data[i.id].value=l}if("measure"==i.modelField.type)if(Object.entries(this.subtotals_data).length>0)a.data[i.id]={...a.data[i.id],...this.subtotals_data[a.id].data[i.id]};else{var n=i.pivoted?[i.pivot_key,i.modelField.name].join("."):i.id,o=0,h=0,u="";this.data.forEach(e=>{if("line_item"==e.type&&e.sort[1]==t){var a=e.data[n].value;Number.isFinite(a)&&(o+=a,h++)}}),"average"===i.modelField.calculation_type&&h>0&&(o/=h),o&&(u=""===i.modelField.value_format?o.toString():r.a.format(i.modelField.value_format,o)),"string"===i.modelField.calculation_type&&(o="",u="");var d={value:o,rendered:u,cell_style:["subtotal","total"]};a.data[n]=d}}),a.sort=[0,t,9999],this.data.push(a)}),this.sortData(),this.hasSubtotals=!0}addColumnSubTotals(){var e="",t={},a=[],s=[],l=this.pivots[0].name;this.pivot_values.forEach(e=>{var t=e.data[l];null!==t&&s.push(t)}),(s=[...new Set(s)]).forEach((s,r)=>{var i=[0,""],l=null;this.measures.forEach((n,o)=>{if(n.can_pivot){var h={modelField:n,pivot:s,measure_idx:o,pivot_idx:r,columns:[],id:["$$$_subtotal_$$$",s,n.name].join("."),after:""};this.columns.forEach((e,t)=>{e.pivoted&&e.levels[0]==s&&(e.modelField.name==n.name&&h.columns.push(e.id),e.levels[0]==s&&t>i[0]&&(i=[t,e.id]))}),s!=e&&(t[s]=i[1],l=null),h.after=l||t[s],e=s,l=h.id,a.push(h)}})}),a.forEach((e,t)=>{var a=this.measures[e.measure_idx],s=new i.Column(e.id,this,a);s.levels=[new i.HeaderField({vis:this,queryResponseField:{name:this.pivots[0].name,label:e.pivot,view:""}}),new i.HeaderField({vis:this,queryResponseField:{name:"subtotal",label:"Subtotal",view:""}})];var r=s.levels.map(e=>e.label);s.sort_by_measure_values=[1,e.measure_idx,...r],r[r.length-1]="string"==typeof r[r.length-1]?r[r.length-1]="ZZZZ":r[r.length-1]=9999,s.sort_by_pivot_values=[1,...r,1e4+t],s.pivoted=!0,s.subtotal=!0,s.pivot_key=[e.pivot,"$$$_subtotal_$$$"].join("|"),this.columns.push(s)}),this.sortColumns(),this.data.forEach(e=>{a.forEach(t=>{var a=0;t.columns.forEach(t=>{a+=e.data[t].value}),e.data[t.id]={value:a,rendered:""===t.modelField.value_format?a.toString():r.a.format(t.modelField.value_format,a),align:"right",cell_style:["subtotal"]},["subtotal","total"].includes(e.type)&&e.data[t.id].cell_style.push("total")})})}calculateVariance(e,t,a,s,i){this.data.forEach(l=>{var n=l.data[s.id].value,o=l.data[i.id].value;if("absolute"===a)var h={value:n-o,rendered:""===e?(n-o).toString():r.a.format(e,n-o),cell_style:[]};else{var u=(n-o)/Math.abs(o);if(isFinite(u))h={value:u,rendered:r.a.format("#0.00%",u),cell_style:[]};else var h={value:null,rendered:"∞",cell_style:[]}}"total"!=l.type&&"subtotal"!=l.type||h.cell_style.push("total"),"subtotal"===l.type&&h.cell_style.push("subtotal"),h.value<0&&h.cell_style.push("red"),l.data[t]=h})}createVarianceColumn(e){if(this.config.colSubtotals||!e.variance.baseline.startsWith("$$$_subtotal_$$$")){var t=["$$$_variance_$$$",e.calc,e.variance.baseline,e.variance.comparison].join("|"),a=this.getColumnById(e.variance.baseline),s=this.getColumnById(e.variance.comparison),r=new i.Column(t,this,a.modelField);"absolute"===e.calc?(r.variance_type="absolute",r.idx=a.idx+1,r.pos=a.pos+1,r.sort_by_measure_values=a.sort_by_measure_values.concat(1),r.sort_by_pivot_values=a.sort_by_pivot_values.concat(1),r.hide=!this.config["var_num|"+a.modelField.name]):(r.variance_type="percentage",r.idx=a.idx+2,r.pos=a.pos+2,r.sort_by_measure_values=a.sort_by_measure_values.concat(2),r.sort_by_pivot_values=a.sort_by_pivot_values.concat(2),r.unit="%",r.hide=!this.config["var_pct|"+a.modelField.name]),a.sort_by_measure_values.length<r.sort_by_measure_values.length&&a.sort_by_measure_values.push(0),a.sort_by_pivot_values.length<r.sort_by_pivot_values.length&&a.sort_by_pivot_values.push(0),void 0!==this.config.columnOrder[r.id]&&(r.pos=this.config.columnOrder[r.id]),r.pivoted=a.pivoted,r.super=a.super,r.pivot_key="",r.levels=a.levels,this.config.groupVarianceColumns&&("getSortByPivots"===this.config.sortColumnsBy&&(r.sort_by_pivot_values[0]=1.5),1===a.levels.length?r.levels=[new i.HeaderField({vis:this,queryResponseField:{name:"variance",label:"Variance"}})]:r.levels=[new i.HeaderField({vis:this,queryResponseField:{name:"variance",label:"Variance"}}),new i.HeaderField({vis:this,queryResponseField:{name:a.id,label:a.levels[1]}})]),this.columns.push(r),e.variance.reverse?this.calculateVariance(a.modelField.value_format,t,e.calc,s,a):this.calculateVariance(a.modelField.value_format,t,e.calc,a,s)}else console.log("Cannot calculate variance of column subtotals if subtotals disabled.")}addVarianceColumns(){var e=[],t=["absolute","percent"];Object.keys(this.variances).forEach(a=>{var s=this.variances[a];if("no_variance"!==s.comparison)if("vs_measure"===s.type)this.hasPivots?this.pivot_values.forEach(a=>{a.is_total||t.forEach(t=>{e.push({calc:t,variance:{baseline:[a.key,s.baseline].join("."),comparison:[a.key,s.comparison].join("."),reverse:s.reverse,type:s.type}})})}):t.forEach(t=>{e.push({variance:s,calc:t})});else if("by_pivot"===s.type)if(1===this.pivots.length||this.pivots[1].name===s.comparison)this.pivot_values.slice(1).forEach((a,r)=>{t.forEach(t=>{a.is_total||e.push({calc:t,variance:{baseline:[a.key,s.baseline].join("."),comparison:[this.pivot_values[r].key,s.baseline].join("."),reverse:s.reverse,type:s.type}})})});else{var r=[];this.pivot_values.forEach(e=>{if(!e.is_total){var t=e.data[this.pivots[0].name];r.includes(t)||r.push(t)}}),r.slice(1).forEach((a,i)=>{t.forEach(t=>{e.push({calc:t,variance:{baseline:["$$$_subtotal_$$$",a,s.baseline].join("."),comparison:["$$$_subtotal_$$$",r[i],s.baseline].join("."),reverse:s.reverse,type:s.type}})})})}}),e.forEach(e=>{this.createVarianceColumn(e)})}sortColumns(){this.columns.sort((e,t)=>{for(var a=this.sortColsBy,s=e[a]().length,r=0;r<s;r++){if(e[a]()[r]>t[a]()[r])return 1;if(e[a]()[r]<t[a]()[r])return-1}return-1})}setColSpans(){var e=[],t=[],a=this.colspan_values,s={};t.forEach(e=>{s[e.name]=1}),this.columns.filter(e=>!e.hide).forEach(t=>{var a={id:t.id,data:t.getHeaderData()};e.push(a)}),t=this.headers;for(var r=e.length-1;r>=0;r--){var i=e[r];a[i.id]={};for(var l=0;l<t.length;l++){var n=t[l],o=i.data[n.name];if(r>0)var h=e[r-1].data[n.name];if(!(r>0&&o===h)){for(var u=l;u<t.length;u++){var d=t[u];a[i.id][d.name]=s[d.name],s[d.name]=1}break}a[i.id][n.name]=-1,s[n.name]+=1}}this.columns.forEach(e=>{void 0!==a[e.id]&&(e.colspans=a[e.id])})}applyFormatting(){this.columns.forEach(e=>{var t=this.config["style|"+e.modelField.name];if(void 0!==t)switch(t){case"black_red":this.data.forEach(t=>{t.data[e.id].value<0&&t.data[e.id].cell_style.push("red")})}})}transposeColumns(){this.transposed_headers=this.columns.filter(e=>"measure"!==e.modelField.type).filter(e=>!e.hide).map(e=>new i.HeaderField({vis:this,queryResponseField:e.modelField}));var e=this.transposed_headers.map(e=>{({})[e.name]=1}),t={align:"left",type:"transposed_table_index",is_table_calculation:!1},a={align:"right",type:"transposed_table_measure",is_table_calculation:!1};this.useHeadings&&!this.hasPivots&&((r=new i.Column("header",this,t)).levels=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})),r.levels[0]=new i.HeaderField({vis:this,queryResponseField:{name:"header",label:"Header"}}),r.colspans=e,r.type="dimension",this.transposed_columns.push(r));"getSortByPivots"===this.sortColsBy?(this.pivots.forEach(a=>{var s=new i.Column(a.name,this,t);s.levels=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})),s.levels[0]=new i.HeaderField({vis:this,queryResponseField:{name:a.name,label:a.label}}),s.colspans=e,this.transposed_columns.push(s)}),(r=new i.Column("measure",this,t)).levels=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})),r.levels[0]=new i.HeaderField({vis:this,queryResponseField:{name:"measure",label:"Measure"}}),r.colspans=e,this.transposed_columns.push(r)):((r=new i.Column("measure",this,t)).levels=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})),r.levels[0]=new i.HeaderField({vis:this,queryResponseField:{name:"measure",label:"Measure"}}),r.colspans=e,this.transposed_columns.push(r),this.pivots.forEach(a=>{var s=new i.Column(a.name,this,t);s.levels=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})),s.levels[0]=new i.HeaderField({vis:this,queryResponseField:{name:a.name,label:a.label}}),s.colspans=e,this.transposed_columns.push(s)}));for(var s=0;s<this.data.length;s++){var r,l=this.data[s];if("line_item"===l.type){var n={},o=[];this.transposed_headers.forEach(e=>{n=this.rowspan_values[l.id],o.push(l.data[e.name].value)})}else if("subtotal"===l.type){n=e;(o=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})))[0]=new i.HeaderField({vis:this,queryResponseField:{name:"subtotal",label:"Subtotal"}})}else if("total"===l.type){n=e;(o=Object(i.newArray)(this.transposed_headers.length,new i.HeaderField({vis:this,queryResponseField:{}})))[0]=new i.HeaderField({vis:this,queryResponseField:{name:"total",label:"Total"}})}(r=new i.Column(l.id,this,a)).transposed=!0,r.colspan_values=n,r.levels=o,this.transposed_columns.push(r)}}transposeRows(){this.columns.filter(e=>"measure"===e.modelField.type).forEach(e=>{var t={};this.data.forEach(a=>{void 0!==a.data[e.id]?(t[a.id]=a.data[e.id],t[a.id].align="right",void 0!==t[a.id].cell_style?t[a.id].cell_style.push("transposed"):t[a.id].cell_style=["transposed"]):console.log("row data does not exist for",e.id)});var a=e.modelField.heading,s=this.config["heading|"+e.modelField.name];void 0!==s&&(a=s||a),t.header={value:a,cell_style:[]},e.subtotal&&t.header.cell_style.push("subtotal");var r="getSortByPivots"===this.sortColsBy?this.pivots.length:0;this.useHeadings&&!this.hasPivots&&r++,t.measure={value:e.getLabel(r),cell_style:[]},e.subtotal&&t.measure.cell_style.push("subtotal"),e.modelField.style.includes("subtotal")&&t.measure.cell_style.push("subtotal"),this.pivots.forEach((a,s)=>{t[a.name]={value:e.levels[s],cell_style:[]},e.subtotal&&t[a.name].cell_style.push("subtotal")});var l=new i.Row("line_item");l.id=e.id,l.modelField=e.modelField,l.hide=e.hide,l.data=t,this.transposed_data.push(l)})}validateConfig(){["traditional","looker","contemporary","custom"].includes(this.config.theme)||(this.config.theme="traditional"),["fixed","auto"].includes(this.config.layout)||(this.config.layout="fixed"),void 0===this.config.transposeTable&&(this.config.transposeTable=!1),Object.entries(this.config).forEach(e=>{if("false"===e[1]?e[1]=!1:"true"===e[1]&&(e[1]=!0),2===e[0].split("|").length){var[t,a]=e[0].split("|");if(["label","heading","hide","style","switch","var_num","var_pct","comparison"].includes(t)){var s=!1;this.dimensions.forEach(e=>{e.name===a&&(s=!0)}),this.measures.forEach(e=>{e.name===a&&(s=!0)}),s||delete this.config[e[0]]}}})}getColumnById(e){var t={};return this.columns.forEach(a=>{e===a.id&&(t=a)}),t}getMeasureByName(e){var t="";return this.measures.forEach(a=>{e===a.name&&(t=a)}),t}sortData(){this.data.sort((e,t)=>{for(var a=e.sort.length,s=0;s<a;s++){if(e.sort[s]>t.sort[s])return 1;if(e.sort[s]<t.sort[s])return-1}return-1}),this.spanRows&&this.setRowSpans()}getRenderedFromHtml(e){var t=new DOMParser;if(void 0===e.html||["undefined",""].includes(e.html))a=e.value;else try{var a=t.parseFromString(e.html,"text/html").documentElement.textContent}catch(t){var a=e.html}return a}getHeaderTiers(){return this.transposeTable?this.dimensions.filter(e=>!e.hide):this.headers}getTableColumnGroups(){var e=[],t=[],a=[];this.transposeTable?this.transposed_columns.forEach(s=>{"transposed_table_index"===s.modelField.type?e.push({id:s.id}):"transposed_table_measure"===s.modelField.type&&"Total"!==s.id?t.push({id:s.id}):"transposed_table_measure"===s.modelField.type&&"Total"===s.id&&a.push({id:s.id})}):this.columns.forEach(s=>{"dimension"!==s.modelField.type||this.useIndexColumn||"$$$_index_$$$"===s.id||s.hide?"dimension"===s.modelField.type&&this.useIndexColumn&&"$$$_index_$$$"===s.id?e.push({id:s.id}):"measure"!==s.modelField.type||s.super||s.hide?"measure"===s.modelField.type&&s.super&&!s.hide&&a.push({id:s.id}):t.push({id:s.id}):e.push({id:s.id})})}getTableHeaders(e){return this.transposeTable?this.transposed_columns.filter(t=>t.colspans[e]>0):this.columns.filter(t=>this.colspan_values[t.id][this.headers[e].name]>0)}getDataRows(){return this.transposeTable?this.transposed_data.filter(e=>!e.hide):this.data}getTableColumns(e){if(this.transposeTable)(t=this.transposed_columns).forEach((t,a)=>{t.rowspan=1,"transposed_table_index"===t.modelField.type&&(t.rowspan=this.colspan_values[e.id][this.headers[a].name])}),t=t.filter(e=>e.rowspan>0);else var t=this.columns.filter(e=>!e.hide).filter(t=>"measure"==t.modelField.type||e.data[t.id].rowspan>0);return t}moveColumns(e,t,a){var s=this.config;if(e!=t){var r=t-e,i=s.columnOrder;this.columns.forEach(a=>{"measure"!=a.modelField.type||a.super||(a.pos>=e&&a.pos<e+10?a.pos+=r:a.pos>=t&&a.pos<e?a.pos+=10:a.pos>=e+10&&a.pos<t+10&&(a.pos-=10),i[a.id]=a.pos)}),a(i)}}getSimpleJson(){var e=[];return this.data.forEach(t=>{if("line_item"===t.type){var a={};this.columns.forEach(e=>{a[e.id]=t.data[e.id].value}),e.push(a)}}),e}}}]);
//# sourceMappingURL=vis_table_plugin.js.map
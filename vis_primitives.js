!function(e){var i={};function t(s){if(i[s])return i[s].exports;var l=i[s]={i:s,l:!1,exports:{}};return e[s].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var l in e)t.d(s,l,function(i){return e[i]}.bind(null,l));return s},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=0)}([function(e,i){class t{constructor({vis:e,queryResponseField:i}){this.vis=e,this.name=i.name,this.view=i.view_label||"",this.label=i.field_group_variant||i.label_short||i.label,this.is_numeric=void 0!==i.is_numeric&&i.is_numeric,this.is_array=["list","number_list","location","tier"].includes(i.type),this.value_format=i.value_format?i.value_format:"",this.geo_type="",("location"===i.type||i.map_layer)&&(this.geo_type="location"===i.type?"location":i.map_layer.name),this.hide=!1,void 0!==this.vis.config["hide|"+this.name]&&this.vis.config["hide|"+this.name]&&(this.hide=!0),this.style="";var t=this.vis.config["style|"+this.name];void 0!==t&&("hide"===t?this.hide=!0:this.style=t),this.heading="",this.short_name="",this.unit="",void 0!==i.tags&&i.tags.forEach(e=>{var i=e.split(":");if("vis-tools"===i[0])switch(i[1]){case"heading":this.heading=i[2];break;case"short_name":this.short_name=i[2];break;case"unit":this.unit=i[2];break;case"style":this.style=i[2]}})}}class s{constructor({keys:e,values:i,types:t=[]}){if(e.length===i.length){this.keys=e,this.values=i,this.types=t;var s=[],l=[];this.values.forEach((e,i)=>{this.types[i]=void 0!==t[i]?t[i]:"line_item","line_item"===this.types[i]?(s.push(e),l.push(e)):"subtotal"===this.types[i]&&l.push(e)}),this.min_for_display=Math.min(...l),this.max_for_display=Math.max(...l),this.min=Math.min(...s),this.max=Math.max(...s),this.sum=s.reduce((e,i)=>e+i,0),this.count=s.length,this.avg=s.length>0?this.sum/s.length:null}else console.log("Could not construct series, arrays were of different length.")}}i.newArray=function(e,i){for(var t=[],s=0;s<e;s++)t.push(i);return t},i.ModelDimension=class extends t{constructor({vis:e,queryResponseField:i}){super({vis:e,queryResponseField:i}),this.type="dimension",this.align="left"}},i.ModelPivot=class extends t{constructor({vis:e,queryResponseField:i}){super({vis:e,queryResponseField:i}),this.type="pivot",this.align="center"}},i.ModelMeasure=class extends t{constructor({vis:e,queryResponseField:i,can_pivot:t}){super({vis:e,queryResponseField:i}),this.type="measure",this.align="right",this.is_table_calculation=void 0!==i.is_table_calculation&&i.is_table_calculation,this.calculation_type=i.type,this.is_turtle=void 0!==i.is_turtle&&i.is_turtle,this.can_pivot=t}},i.CellSeries=class{constructor({column:e,row:i,sort_value:t,series:l}){this.column=e,this.row=i,this.sort_value=t,this.series=new s(l)}toString(){var e="";return this.series.keys.forEach((i,t)=>{e+=i+":";var s=""===this.column.modelField.value_format?this.series.values[t].toString():SSF.format(this.column.modelField.value_format,this.series.values[t]);e+=s+" "}),e}},i.ColumnSeries=class{constructor({column:e,is_numeric:i,series:t}){this.column=e,this.is_numeric=i,this.series=new s(t)}},i.HeaderCell=class{constructor({column:e,type:i,label:t=null,align:s="center",modelField:l={name:"",label:"",view:""},pivotData:a={}}={column:e,type:i,label:t,align:s,modelField:l,pivotData:a}){this.id=[e.id,i].join("."),this.column=e,this.type=i,this.colspan=1,this.rowspan=1,this.headerRow=!0,this.cell_style=["headerCell"],this.label=t,"dimension"===this.column.modelField.type?this.align="pivot"===i?"right":"heading"===i?"center":l.align||"left":"measure"===this.column.modelField.type?"field"!==i||0!==e.vis.pivot_fields.length&&"getSortByPivots"!==e.vis.sortColsBy?this.align="center":this.align=l.align||"right":this.align=s,this.modelField=l,this.pivotData=a,l.type&&this.cell_style.push(l.type),l.is_table_calculation&&this.cell_style.push("calculation")}},i.DataCell=class{constructor({value:e,rendered:i=null,html:t=null,links:s=[],cell_style:l=[],align:a="right",rowid:r="",colid:n="",rowspan:o=1,colspan:h=1}={}){this.value=e,this.rendered=i,this.html=t,this.links=s,this.cell_style=l,this.align=a,this.colid=n,this.rowid=r,this.id=n&&r?[n,r].join("."):null,this.rowspan=o,this.colspan=h,this.cell_style.push("rowCell")}},i.Row=class{constructor(e="line_item"){this.id="",this.hide=!1,this.type=e,this.sort=[],this.data={}}},i.Column=class{constructor(e,i,t){this.id=e,this.vis=i,this.modelField=t,this.transposed=!1,this.idx=0,this.pos=0,this.levels=[],this.pivot_key="",this.unit=t.unit||"",this.hide=t.hide||!1,this.isVariance=!1,this.variance_type=null,this.pivoted=!1,this.isRowTotal=!1,this.super=!1,this.subtotal=!1,this.subtotal_data={},this.series=null,this.sort=[],this.colspans=[];var s={};this.vis.headers.forEach(e=>{s[e.type]=1}),this.vis.colspan_values[this.id]=s}getHeaderCellLabel(e){var i=this.levels[e];if(null!==i.label)var t=i.label;else{t=i.modelField.label;var s=this.vis.config["heading|"+i.modelField.name],l=this.vis.config["label|"+i.modelField.name];if("heading"===i.type)return t=void 0!==s&&s||i.modelField.heading;"field"===i.type&&(t=this.vis.useShortName&&i.modelField.short_name||i.modelField.label,void 0!==l&&l!==this.modelField.label&&(t=l||t),this.isVariance&&(t=this.vis.groupVarianceColumns?2===this.vis.pivot_values.length?"absolute"===this.variance_type?t+" #":t+" %":"absolute"===this.variance_type?t+" Var #":t+" Var %":"absolute"===this.variance_type?"Var #":"Var %"),void 0!==this.vis.useViewName&&this.vis.useViewName&&(t=[this.modelField.view,t].join(" "))),"pivot"===i.type&&this.isVariance&&this.vis.groupVarianceColumns&&(t=2===this.vis.pivot_values.length?"Variance":"Var "+t)}return t}getHeaderCellLabelByType(e){for(var i=0;i<this.vis.headers.length;i++)if(e===this.vis.headers[i].type)return this.getHeaderCellLabel(i);return null}setHeaderCellLabels(){this.levels.forEach((e,i)=>{e.label=null===e.label?this.getHeaderCellLabel(i):e.label})}getHeaderData(){var e={};return this.modelField.vis.headers.forEach((i,t)=>{e[i.type]=this.levels[t]}),e}}}]);
//# sourceMappingURL=vis_primitives.js.map